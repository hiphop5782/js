!function(w){w.Hakademy=w.Hakademy||{},w.Hakademy.util=w.Hakademy.util||{},w.Hakademy.util.filterNodesByClassName=function(list,className){var rowList=[];return list.forEach((function(u){try{u.classList.contains(className)&&rowList.push(u)}catch(e){}})),rowList},w.Hakademy.Reservation=function(area){var rowsize=area.getAttribute("data-rowsize");if(!rowsize)throw"cinema-seat-area에 data-rowsize를 정의하십시오";this.rowsize=function(){return rowsize};var colsize=area.getAttribute("data-colsize");if(!colsize)throw"cinema-seat-area에 data-colsize를 정의하십시오";this.colsize=function(){return colsize};var sendName=area.getAttribute("data-name");sendName||(console.warn("data-name이 설정되지 않아 seat으로 설정됩니다"),sendName="seat");var width=area.offsetWidth;this.width=function(){return width};var size=parseInt(width/colsize);this.size=function(){return size};for(var rowList=Hakademy.util.filterNodesByClassName(area.childNodes,"cinema-seat-row"),line=rowList.shift(),r=1;r<=rowsize;r++)if(line&&parseInt(line.getAttribute("data-row"))==r){for(var colList=Hakademy.util.filterNodesByClassName(line.childNodes,"cinema-seat"),cell=colList.shift(),c=1;c<colsize;c++)if(cell&&parseInt(cell.getAttribute("data-column"))==c){if(cell.style.width=size+"px",cell.style.height=size+"px",!cell.classList.contains("disabled")){var checkbox=document.createElement("input");checkbox.type="checkbox",checkbox.name=sendName,checkbox.value=r+"-"+c,checkbox.style.display="none",checkbox.checked=cell.classList.contains("active"),cell.appendChild(checkbox),cell.addEventListener("click",clickListener)}cell=colList.shift()}else{var seat=createEmptySeat(size);cell?line.insertBefore(seat,cell):line.appendChild(seat)}line=rowList.shift()}else{var rowDiv=createEmptyRow();line?area.insertBefore(rowDiv,line):area.appendChild(rowDiv);for(var q=1;q<=colsize;q++)rowDiv.appendChild(createEmptySeat(size))}function clickListener(){var checkbox=this.childNodes[0];checkbox.checked=!checkbox.checked,checkbox.checked?this.classList.add("active"):this.classList.remove("active")}function createEmptyRow(){var row=document.createElement("div");return row.classList.add("cinema-seat-row"),row}function createEmptySeat(size){var seat=document.createElement("div");return seat.classList.add("cinema-seat"),seat.classList.add("empty"),seat.style.width=size+"px",seat.style.height=size+"px",seat}}}(window);