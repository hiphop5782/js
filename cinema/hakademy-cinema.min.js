!function(w){function SeatClickHandler(){var checkbox=this.querySelector("input[type=checkbox]");checkbox.checked?(checkbox.checked=!1,this.classList.remove("active")):(checkbox.checked=!0,this.classList.add("active"))}function calculateInnerWidth(tag){var style=window.getComputedStyle(tag,null),fix=0;return"border-box"===style.boxSizing?parseFloat(style.width)-parseFloat(style.paddingLeft)-parseFloat(style.paddingRight)-parseFloat(style.borderLeftWidth)-parseFloat(style.borderRightWidth)-0:parseFloat(style.width)-0}w.Hacademy=w.Hacademy||{},w.Hacademy.util=w.Hacademy.util||{},w.Hacademy.Reservation=function(area,callback){if(!area)throw"영역이 정의되지 않았습니다";"string"==typeof area&&(area=document.querySelector(area));var seatArea=area.querySelector(".cinema-seat-area");if(!seatArea)throw"좌석 영역이 지정되지 않았습니다(class='cinema-seat-area')";var rowsize=seatArea.dataset.rowsize;if(!rowsize)throw"줄의 크기를 올바르게 설정하십시오";var colsize=seatArea.dataset.colsize;if(!colsize)throw"칸의 크기를 올바르게 설정하십시오";var seatAreaWidth=calculateInnerWidth(seatArea),unitSize=parseInt(seatAreaWidth/colsize),mode=seatArea.dataset.mode||"auto",sendName=area.dataset.name||"seat";this.options={area:area,seatArea:seatArea,rowsize:rowsize,colsize:colsize,seatAreaWidth:seatAreaWidth,unitSize:unitSize,mode:mode,sendName:sendName},"auto"===mode?this.automaticFillProcess():this.manualFillProcess();var app=this;w.addEventListener("resize",(function(){app.resize()})),app.resize()},w.Hacademy.Reservation.prototype.automaticFillProcess=function(){for(var i=0;i<this.options.rowsize;i++)for(var j=0;j<this.options.colsize;j++){var value=i+"-"+j,seat=this.createUnit("normal");seat.setValue(value),this.options.seatArea.appendChild(seat)}},w.Hacademy.Reservation.prototype.manualFillProcess=function(){var rowsize=this.options.rowsize,colsize=this.options.colsize,seatArea=this.options.seatArea,cloneSeatArea=seatArea.cloneNode(!0);this.options.seatArea.innerHTML="";for(var i=1;i<=rowsize;i++)for(var j=1;j<=colsize;j++){var findElement=cloneSeatArea.querySelector(".cinema-seat[data-row='"+i+"'][data-col='"+j+"']");if(findElement){var state=findElement.dataset.state||"normal",seat=this.createUnit(state);seatArea.appendChild(seat)}else{var seat=this.createUnit("empty");seatArea.appendChild(seat)}}},w.Hacademy.Reservation.prototype.createUnit=function(v){var seat,seat,seat;if("empty"===v)return(seat=this.createUnit()).classList.add("empty"),seat;if("active"===v){var seat=this.createUnit(),checkbox=this.createCheckbox(!0);return seat.appendChild(checkbox),seat.classList.add("active"),seat.addEventListener("click",SeatClickHandler),seat.setValue=function(value){var checkbox;this.querySelector("input[type=checkbox]").value=value},seat}if("normal"===v){var seat=this.createUnit(),checkbox=this.createCheckbox();return seat.appendChild(checkbox),seat.addEventListener("click",SeatClickHandler),seat.setValue=function(value){var checkbox;this.querySelector("input[type=checkbox]").value=value},seat}return"disabled"===v?((seat=this.createUnit()).classList.add("disabled"),seat):((seat=document.createElement("div")).classList.add("cinema-seat"),seat.style.width=this.options.unitSize+"px",seat.style.height=this.options.unitSize+"px",seat)},w.Hacademy.Reservation.prototype.createCheckbox=function(check){var checkbox=document.createElement("input");return checkbox.setAttribute("type","checkbox"),checkbox.setAttribute("name",this.options.sendName),checkbox.style.display="none",checkbox.checked=!!check,checkbox},w.Hacademy.Reservation.prototype.resize=function(){this.options.seatAreaWidth=calculateInnerWidth(this.options.seatArea),this.options.unitSize=parseInt(this.options.seatAreaWidth/this.options.colsize);for(var seatList=this.options.seatArea.querySelectorAll(".cinema-seat"),i=0;i<seatList.length;i++)seatList[i].style.width=this.options.unitSize+"px",seatList[i].style.height=this.options.unitSize+"px"}}(window);