!function(t){function e(){var t=this.querySelector("input[type=checkbox]");t.checked?(t.checked=!1,this.classList.remove("active")):(t.checked=!0,this.classList.add("active"))}function i(t){switch(t.preventDefault(),t.target.dataset.direction){case"up":t.target.dataset.direction="right";break;case"right":t.target.dataset.direction="down";break;case"down":t.target.dataset.direction="left";break;case"left":t.target.dataset.direction="up"}}function a(t){var e=window.getComputedStyle(t,null);return"border-box"===e.boxSizing?parseFloat(e.width)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderLeftWidth)-parseFloat(e.borderRightWidth)-0:parseFloat(e.width)-0}t.Hacademy=t.Hacademy||{},t.Hacademy.util=t.Hacademy.util||{},t.Hacademy.Reservation=function(e,i){if(!e)throw"영역이 정의되지 않았습니다";"string"==typeof e&&(e=document.querySelector(e));var s=e.querySelector(".cinema-seat-area");if(!s)throw"좌석 영역이 지정되지 않았습니다(class='cinema-seat-area')";var o=s.dataset.rowsize;if(!o)throw"줄의 크기를 올바르게 설정하십시오";var r=s.dataset.colsize;if(!r)throw"칸의 크기를 올바르게 설정하십시오";var n=a(s),c=parseInt(n/r),d=s.dataset.mode||"auto",h=e.dataset.name||"seat",l=e.dataset.direction||"up";this.options={area:e,seatArea:s,rowsize:o,colsize:r,seatAreaWidth:n,unitSize:c,mode:d,sendName:h,direction:l},"auto"===d?this.automaticFillProcess():this.manualFillProcess();var p=this;t.addEventListener("resize",function(){p.resize()}),p.resize()},t.Hacademy.Reservation.prototype.automaticFillProcess=function(){for(var t=0;t<this.options.rowsize;t++)for(var e=0;e<this.options.colsize;e++){var i=t+"-"+e+"-"+this.options.direction,a=this.createUnit("normal");a.dataset.direction=this.options.direction,a.setValue(i),this.options.seatArea.appendChild(a)}},t.Hacademy.Reservation.prototype.manualFillProcess=function(){var t=this.options.rowsize,e=this.options.colsize,i=this.options.seatArea,a=i.cloneNode(!0);this.options.seatArea.innerHTML="";for(var s=1;s<=t;s++)for(var o=1;o<=e;o++){var r=a.querySelector(".cinema-seat[data-row='"+s+"'][data-col='"+o+"']");if(r){var n=s+"-"+o,c=r.dataset.state||"normal";(d=this.createUnit(c)).setValue&&d.setValue(n),i.appendChild(d)}else{var d=this.createUnit("empty");i.appendChild(d)}}},t.Hacademy.Reservation.prototype.createUnit=function(t){if("empty"===t)return(a=this.createUnit()).classList.add("empty"),a;if("active"===t){var a=this.createUnit(),s=this.createCheckbox(!0);return a.appendChild(s),a.classList.add("active"),a.addEventListener("click",e),a.addEventListener("contextmenu",i),a.setValue=function(t){this.querySelector("input[type=checkbox]").value=t},a}if("normal"===t){var a=this.createUnit();s=this.createCheckbox();return a.appendChild(s),a.addEventListener("click",e),a.addEventListener("contextmenu",i),a.setValue=function(t){this.querySelector("input[type=checkbox]").value=t},a}return"disabled"===t?((a=this.createUnit()).classList.add("disabled"),a):((a=document.createElement("div")).classList.add("cinema-seat"),a.style.width=this.options.unitSize+"px",a.style.height=this.options.unitSize+"px",a)},t.Hacademy.Reservation.prototype.createCheckbox=function(t){var e=document.createElement("input");return e.setAttribute("type","checkbox"),e.setAttribute("name",this.options.sendName),e.style.display="none",e.checked=!!t,e},t.Hacademy.Reservation.prototype.resize=function(){this.options.seatAreaWidth=a(this.options.seatArea),this.options.unitSize=parseInt(this.options.seatAreaWidth/this.options.colsize);for(var t=this.options.seatArea.querySelectorAll(".cinema-seat"),e=0;e<t.length;e++)t[e].style.width=this.options.unitSize+"px",t[e].style.height=this.options.unitSize+"px"}}(window);
