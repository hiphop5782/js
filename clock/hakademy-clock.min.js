!function(w){function Unit(value,size){this.value=value,this.size=size,this.el=document.createElement("span"),this.el.style.flexGrow=1,this.el.style.verticalAlign="middle",this.el.style.letterSpacing="0.3rem",this.el.textContent=DecimalFormat(this.value,this.size),this.clear=function(){this.set(0)},this.set=function(v){this.value=v,this.el.textContent=DecimalFormat(this.value,this.size)}}function Splitter(value){this.el=document.createElement("span"),this.el.textContent=value||":"}function DecimalFormat(value,size){if("number"!=typeof value)throw"Function decimalFormat : 숫자만 변환 가능합니다";for(var str="",n=value;n>0;)str=n%10+str,n=parseInt(n/10);for(;str.length<size;)str="0"+str;return str}w.Hakademy=w.Hakademy||{},w.Hakademy.util=w.Hakademy.util||{},w.Hakademy.util.clock=function(selector,options){if(this.el=document.querySelector(selector),!this.el)throw"대상이 없습니다";this.inner=document.createElement("div"),this.el.appendChild(this.inner);var defaultOption={backgroundColor:"rgba(0,0,0,0.5)",textColor:"white",fontFamily:null,fontSize:50,border:null,padding:10,display:"block",type:"timer",hour:0,minute:0,second:0,ms:0,hourVisible:!0,msVisible:!1,isBorderRounded:!0,callback:null,startButton:null,stopButton:null,resetButton:null};if(this.options=Object.assign({},defaultOption,options),this.options.startButton){var app=this;document.querySelectorAll(this.options.startButton).forEach((function(el){el.addEventListener("click",(function(e){e.preventDefault(),app.start()}))})),document.querySelectorAll(this.options.stopButton).forEach((function(el){el.addEventListener("click",(function(e){e.preventDefault(),app.stop()}))})),document.querySelectorAll(this.options.resetButton).forEach((function(el){el.addEventListener("click",(function(e){e.preventDefault(),app.reset()}))}))}this.handle=null,this.lastTime=0,this.createInside(),this.createDesign(),this.initTime(),"clock"===this.options.type&&this.start()},w.Hakademy.util.clock.prototype.createDesign=function(){this.el.style.position="relative",this.el.style.display="inline"===this.options.display?"inline-block":"block",this.el.style.verticalAlign="middle",this.el.style.padding=this.options.padding+"px",this.el.style.boxSizing="border-box",this.el.style.backgroundColor=this.options.backgroundColor,this.el.style.color=this.options.textColor,this.el.style.fontSize=this.options.fontSize+"px",this.el.style.textAlign="center",this.el.style.overflow="hidden",this.inner.style.display="flex",this.inner.style.flexWrap="no-wrap",this.options.border&&(this.el.style.border=this.options.border),this.options.isBorderRounded&&(this.inner.style.borderRadius=this.el.offsetHeight/5+"px"),this.options.fontFamily&&(this.inner.style.fontFamily=this.options.fontFamily)},w.Hakademy.util.clock.prototype.createInside=function(){("clock"===this.options.type||this.options.hourVisible)&&(this.hour=new Unit(0,2),this.inner.appendChild(this.hour.el),this.inner.appendChild((new Splitter).el)),this.minute=new Unit(0,2),this.inner.appendChild(this.minute.el),this.second=new Unit(0,2),this.inner.appendChild((new Splitter).el),this.inner.appendChild(this.second.el),this.options.msVisible&&(this.inner.appendChild(new Splitter(".").el),this.millis=new Unit(0,2),this.inner.appendChild(this.millis.el))},w.Hakademy.util.clock.prototype.clearValue=function(){this.hour.clear(),this.minute.clear(),this.second.clear()},w.Hakademy.util.clock.prototype.display=function(h,m,s,ms){("clock"===this.options.type||this.options.hourVisible)&&this.hour.set(h),this.minute.set(m),this.second.set(s),this.options.msVisible&&this.millis.set(ms)},w.Hakademy.util.clock.prototype.start=function(){if(this.handle)return!1;var app=this,delay=this.options.msVisible?10:1e3;if("clock"===this.options.type){var offset=60*(new Date).getTimezoneOffset()*1e3;app.currentTime(offset),this.handle=setInterval((function(){app.currentTime(offset)}),delay)}else this.lastTime=Date.now(),this.handle=setInterval((function(){app.changeTime()}),delay);return!0},w.Hakademy.util.clock.prototype.stop=function(){return!(!this.handle||"clock"===this.options.type)&&(clearInterval(this.handle),this.handle=null,!0)},w.Hakademy.util.clock.prototype.reset=function(){return!this.handle&&(this.initTime(),!0)},w.Hakademy.util.clock.prototype.currentTime=function(offset){var now=Date.now();now-=offset;var ms=parseInt(now%1e3/10),s=(now=parseInt(now/1e3))%60,m=(now=parseInt(now/60))%60,h=(now=parseInt(now/60))%24;this.display(h,m,s,ms)},w.Hakademy.util.clock.prototype.changeTime=function(){var delta=Date.now()-this.lastTime;switch(this.options.type){case"stopwatch":this.time+=delta;break;case"timer":this.time-=delta}this.options.msVisible||(this.time=1e3*parseInt((this.time+500)/1e3)),this.time<=0?(this.setTime(0),this.options.callback&&(this.options.callback(this),this.stop())):(this.setTime(this.time),this.lastTime=Date.now())},w.Hakademy.util.clock.prototype.clearTime=function(){this.setTime(0)},w.Hakademy.util.clock.prototype.setTime=function(time){this.time=time;var millis=parseInt(time%1e3/10),second=(time=parseInt(time/1e3))%60,minute=(time=parseInt(time/60))%60,hour=time=parseInt(time/60);this.display(hour,minute,second,millis)},w.Hakademy.util.clock.prototype.initTime=function(){var time=36e5*this.options.hour;time+=6e4*this.options.minute,time+=1e3*this.options.second,this.options.msVisible&&(time+=this.options.ms),this.setTime(time)},w.Hakademy.util.clock.prototype.set=function(name,value){if(!value&&"string"==typeof name)return this.options[name];"object"==typeof name?(this.options=Object.assign({},this.options,name),this.createDesign()):(this.options[name]=value,this.createDesign())}}(window);